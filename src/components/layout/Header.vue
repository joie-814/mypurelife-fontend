<template>
  <header class="header">
    <!-- é ‚éƒ¨æ©«å¹…å€åŸŸ -->
    <section class="top-banner">
      <div class="banner-content">
        <span class="banner-tag">ğŸ å¥åº·å®šæœŸè³¼</span>
        <span class="banner-text">é€±æœŸé…é€ï¼Œå¥åº·å®…åˆ°å®¶ï¼</span>
      </div>
      <div class="banner-right">
        <span class="free-shipping">ğŸšš è³¼ç‰©æ»¿ NT$1,200 å…é‹è²»</span>
      </div>
    </section>
    <div class="container">
      <div class="logo">
        <router-link to="/">
            <h1>pureLife</h1>
        </router-link>
        <p>å°ˆç§‘é†«å¸«æ¨è–¦ä¿å¥é£Ÿå“ | ä½ å¥åº·,æˆ‘å®‰å¿ƒ</p>
      </div>
      
    <!-- å°èˆªé¸å–® -->
    <nav class="nav">
        <!-- æœ‰ä¸‹æ‹‰é¸å–®çš„é …ç›® -->
        <div class="nav-link" 
            @mouseenter="activeDropdown = 0" 
            @mouseleave="activeDropdown = null">
            å…¨éƒ¨å•†å“
            <!-- ä¸‹æ‹‰é¸å–® -->
            <div class="dropdown" v-show="activeDropdown === 0">
                <a href="newsellers" class="dropdown-item">æ–°å“å°ˆå€</a>
                <a href="#" class="dropdown-item">æˆåˆ†åˆ†é¡</a>
                <a href="#" class="dropdown-item">åŠŸæ•ˆåˆ†é¡</a>
                <a href="#" class="dropdown-item">æ—ç¾¤åˆ†é¡</a>
            </div>
        </div>

        <!-- å…¶ä»–æ™®é€šé€£çµ -->
        <router-link to="/bestsellers" class="nav-link">ç†±éŠ·æ’è¡Œæ¦œ</router-link>
        <router-link to="/articles" class="nav-link">ä¿å¥å°ˆæ¬„</router-link>

        <div class="nav-link" 
            @mouseenter="activeDropdown = 1" 
            @mouseleave="activeDropdown = null">
            é—œæ–¼æˆ‘å€‘
            <!-- ä¸‹æ‹‰é¸å–® -->
            <div class="dropdown" v-show="activeDropdown === 1">
                <a href="#" class="dropdown-item">å“â€‹ç‰Œç†å¿µâ€‹</a>
                <a href="#" class="dropdown-item">åº—â€‹å®¶â€‹è³‡è¨Š</a>
                <a href="#" class="dropdown-item">æ¶ˆè²»è€…å¥½è©•</a>
                <a href="#" class="dropdown-item">éš±ç§æ¬Šâ€‹åŠâ€‹ç¶²ç«™â€‹ä½¿ç”¨â€‹æ¢æ¬¾</a>
            </div>
        </div>
        
      </nav>
      
      <!-- å³å´åŠŸèƒ½ -->
      <div class="header-actions">
        <button class="icon-btn">ğŸ” æœå°‹</button>
        <button class="icon-btn" @click="$router.push('/login')">ğŸ‘¤ æœƒå“¡ä¸­å¿ƒ</button>
        <router-link to="/cart" class="icon-btn cart-link">
          ğŸ›’ è³¼ç‰©è»Š
          <span class="cart-badge" v-if="cartStore.totalItems > 0">
            {{ cartStore.totalItems }}
          </span>
        </router-link>
      </div>
    </div>
  </header>
</template>

<script setup>
import { ref } from 'vue'
import { useCartStore } from '@/stores/cartStore.js'
const cartStore = useCartStore()
const activeDropdown = ref(null) 


</script>

<style scoped>
.header {
  background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  position: sticky;
  top: 0;
  z-index: 1000;
}
/* é ‚éƒ¨æ©«å¹… */
.top-banner {
  background: #327a2ea9;
  color: white;
  padding: 0.5rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.875rem;
}

.banner-content {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.banner-tag {
  background: rgba(255, 255, 255, 0.2);
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-weight: 600;
}

.banner-text {
  font-size: 0.9rem;
}

.banner-right {
  display: flex;
  align-items: center;
  gap: 1.5rem;
}

.free-shipping {
  font-weight: 500;
}


.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Logo */
.logo a {
  text-decoration: none;
  color: inherit;
}
.logo p {
  font-size: 0.8rem;
  color: #333;
  margin: 0;
}

.logo h1 {
  font-size: 2rem;
  color: #327a2ea9;
  margin: 0;
  cursor: pointer;
}

/* å°èˆªé¸å–® */
.nav {
  display: flex;
  gap: 2rem;
}

.nav-link {
  text-decoration: none;
  color: #333;
  font-size: 1rem;
  transition: color 0.3s;
  padding: 0.5rem 0;
  position: relative;
}

/* Hover åº•ç·šæ•ˆæœ */
/* åœ¨nav-link::afterå¾Œé¢åŠ æ±è¥¿ */
.nav-link::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: 327a2ea9;
  transition: width 0.3s;
}

.nav-link:hover::after {
  width: 100%;
}

.nav-link:hover {
  color: #327a2ea9;
}

/* ç•¶å‰é é¢é«˜äº® */
.nav-link.router-link-active {
  color: #327a2ea9;
  font-weight: 600;
}

/* å³å´æŒ‰éˆ• */
.header-actions {
  display: flex;
  gap: 1rem;
}

.icon-btn {
  background: none;
  border: none;
  font-size: 1rem;
  cursor: pointer;
  padding: 0.5rem;
  position: relative;
  transition: opacity 0.3s;
}

.icon-btn:hover {
  opacity: 0.6;
}

/* è³¼ç‰©è»Šå¾½ç« (åŠ å…¥è³¼ç‰©è»Šçš„æ•¸é‡) */
.cart-badge {
  position: absolute;
  top: 0;
  right: 0;
  background: #FF5722;
  color: white;
  font-size: 0.75rem;
  padding: 0.2rem 0.4rem;
  border-radius: 10px;
  min-width: 18px;
  text-align: center;
}

/* âœ… æ–°å¢ä¸‹æ‹‰é¸å–®æ¨£å¼ */

.dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  background: white;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  border-radius: 4px;
  min-width: 150px;
  padding: 0.5rem 0;
  z-index: 1000;
}

.dropdown-item {
  display: block;
  padding: 0.75rem 1.5rem;
  color: #333;
  text-decoration: none;
  transition: background 0.2s;
}

.dropdown-item:hover {
  background: #f5f5f5;
  color: #327a2ea9;
}

.cart-link {
  position: relative;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 5px;
}

.cart-badge {
  position: absolute;
  top: -5px;
  right: -5px;
  background-color: #e74c3c;
  color: white;
  font-size: 12px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: 10px;
  min-width: 20px;
  text-align: center;
  line-height: 1.2;
}

/* æ‰‹æ©Ÿç‰ˆ */
@media (max-width: 768px) {
  .container {
    padding: 1rem;
  }
  
  .nav {
    display: none;  /* æ‰‹æ©Ÿç‰ˆå…ˆéš±è—é¸å–® */
  }
  
  .logo h1 {
    font-size: 1.8rem;
  }
  
  .icon-btn {
    font-size: 1rem;
  }
}
</style>